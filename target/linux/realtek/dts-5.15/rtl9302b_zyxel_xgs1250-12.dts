// SPDX-License-Identifier: (GPL-2.0-or-later OR MIT)

/dts-v1/;

#include "rtl9302b_zyxel_xgs12xx.dtsi"

/ {
	compatible = "zyxel,xgs1250-12", "realtek,rtl9302b-soc", "realtek,rtl9302-soc", "realtek,rtl930x-soc";
	model = "Zyxel XGS1250-12 Switch";

	sfp0: sfp-p12 {
		compatible = "sff,sfp";
		i2c-bus = <&i2c0_1>;
		los-gpio = <&gpio0 17 GPIO_ACTIVE_HIGH>;
		tx-fault-gpio = <&gpio0 20 GPIO_ACTIVE_HIGH>;
		mod-def0-gpio = <&gpio0 16 GPIO_ACTIVE_LOW>;
		tx-disable-gpio = <&gpio0 15 GPIO_ACTIVE_HIGH>;
	};
};

&firmware_partition {
	openwrt,ih-magic = <0x93001250>;
};

&i2c0_0 {
	status = "disable";
};

&mdio0 {
	/* External Aquantia 113C PHYs */
	phy24: ethernet-phy@24 {
		reg = <24>;
		compatible = "ethernet-phy-ieee802.3-c45";
		rtl9300,smi-address = <1 8>;
		sds = <6>;
		/* Disabled because we do not know how to bring up again */
		/* reset-gpios = <&gpio0 21 GPIO_ACTIVE_LOW>; */
	};

	phy25: ethernet-phy@25 {
		reg = <25>;
		compatible = "ethernet-phy-ieee802.3-c45";
		rtl9300,smi-address = <2 8>;
		sds = <7>;
		/* Disabled because we do not know how to bring up again */
		/* reset-gpios = <&gpio0 21 GPIO_ACTIVE_LOW>; */
	};

	phy26: ethernet-phy@26 {
		reg = <26>;
		compatible = "ethernet-phy-ieee802.3-c45";
		rtl9300,smi-address = <3 8>;
		sds = <8>;
		/* Disabled because we do not know how to bring up again */
		/* reset-gpios = <&gpio0 21 GPIO_ACTIVE_LOW>; */
	};

	/* SFP+ Port */
	phy27: ethernet-phy@27 {
		reg = <27>;
		compatible = "ethernet-phy-ieee802.3-c22";
		phy-is-integrated;
		sds = <9>;
	};
};

&switch0_ports {
	port@24 {
		reg = <24>;
		label = "lan9";
		led-num = <(
			RTL93XX_LED_NUM0 | /* Amber/Lime | RGB */
			RTL93XX_LED_NUM1 | /* Amber      | Red */
			RTL93XX_LED_NUM2 | /* Lime       | Green */
			RTL93XX_LED_NUM3   /* off        | Blue */
		)>;
		led-set = <2>;
		phy-mode = "usxgmii";
		phy-handle = <&phy24>;
	};

	port@25 {
		reg = <25>;
		label = "lan10";
		led-num = <(
			RTL93XX_LED_NUM0 | /* Amber/Lime | RGB */
			RTL93XX_LED_NUM1 | /* Amber      | Red */
			RTL93XX_LED_NUM2 | /* Lime       | Green */
			RTL93XX_LED_NUM3   /* off        | Blue */
		)>;
		led-set = <2>;
		phy-mode = "usxgmii";
		phy-handle = <&phy25>;
	};

	port@26 {
		reg = <26>;
		label = "lan11";
		led-num = <(
			RTL93XX_LED_NUM0 | /* Amber/Lime | RGB */
			RTL93XX_LED_NUM1 | /* Amber      | Red */
			RTL93XX_LED_NUM2 | /* Lime       | Green */
			RTL93XX_LED_NUM3   /* off        | Blue */
		)>;
		led-set = <2>;
		phy-mode = "usxgmii";
		phy-handle = <&phy26>;
	};

	port@27 {
		reg = <27>;
		label = "lan12";
		led-num = <(
			RTL93XX_LED_NUM0 | /* Amber */
			RTL93XX_LED_NUM1   /* Lime */
		)>;
		led-set = <3>;
		phy-mode = "10gbase-r";
		phy-handle = <&phy27>;
		managed = "in-band-status";
		sfp = <&sfp0>;
	};
};
