// SPDX-License-Identifier: (GPL-2.0-or-later OR MIT)
/dts-v1/;

#include "rtl9302_zyxel_xgs12xx.dtsi"

/ {
	compatible = "zyxel,xgs1250-12", "realtek,rtl9302-soc", "realtek,rtl838x-soc";
	model = "Zyxel XGS1250-12 Switch";

	/* i2c of the SFP cage: port 12 */
	i2c0: i2c0 {
		compatible = "realtek,rtl9302-i2c", "realtek,rtl9300-i2c";
		reg = <0x1b00036c 0x3c>;
		#address-cells = <1>;
		#size-cells = <0>;
		sda-pin = <10>;
		scl-pin = <8>;
		clock-frequency = <100000>;
	};

	sfp0: sfp-p12 {
		compatible = "sff,sfp";
		i2c-bus = <&i2c0>;
		los-gpio = <&gpio0 17 GPIO_ACTIVE_HIGH>;
		mod-def0-gpio = <&gpio0 16 GPIO_ACTIVE_LOW>;
		tx-disable-gpio = <&gpio0 15 GPIO_ACTIVE_HIGH>;
		tx-fault-gpio = <&gpio0 20 GPIO_ACTIVE_HIGH>;
	};

	led_set {
		compatible = "realtek,rtl9302-leds", "realtek,rtl9300-leds";
		led_set0 = <0x0000 0xffff 0x0a20 0x0b80>; /* LED set 0: 10Mbit, 100Mbit, 1Gbit */
		led_set1 = <0x0a0b 0x0a28 0x0a82 0x0a0b>; /* LED set 2: 1GBit, 2.5Gbit, 5Gbit, 10Gbit */
		led_set2 = <0x0000 0xffff 0x0a20 0x0a01>; /* LED set 3: 1Gbit, 10Gbit */
	};
};

&firmware_partition {
	openwrt,ih-magic = <0x93001250>;
};

&mdio0 {
	/* External Aquantia 113C PHYs */
	phy24: ethernet-phy@24 {
		reg = <24>;
		compatible = "ethernet-phy-ieee802.3-c45";
		rtl9300,smi-address = <1 8>;
		sds = <6>;
		/* Disabled because we do not know how to bring up again */
		/* reset-gpios = <&gpio0 21 GPIO_ACTIVE_LOW>; */
	};

	phy25: ethernet-phy@25 {
		reg = <25>;
		compatible = "ethernet-phy-ieee802.3-c45";
		rtl9300,smi-address = <2 8>;
		sds = <7>;
		/* Disabled because we do not know how to bring up again */
		/* reset-gpios = <&gpio0 21 GPIO_ACTIVE_LOW>; */
	};

	phy26: ethernet-phy@26 {
		reg = <26>;
		compatible = "ethernet-phy-ieee802.3-c45";
		rtl9300,smi-address = <3 8>;
		sds = <8>;
		/* Disabled because we do not know how to bring up again */
		/* reset-gpios = <&gpio0 21 GPIO_ACTIVE_LOW>; */
	};

	/* SFP+ Port */
	phy27: ethernet-phy@27 {
		compatible = "ethernet-phy-ieee802.3-c22";
		phy-is-integrated;
		reg = <27>;
		sds = <9>;
	};
};

&switch0_ports {
	port@24 {
		reg = <24>;
		label = "lan9";
		phy-mode = "usxgmii";
		phy-handle = <&phy24>;
		led-set = <1>;
	};
	port@25 {
		reg = <25>;
		label = "lan10";
		phy-mode = "usxgmii";
		phy-handle = <&phy25>;
		led-set = <1>;
	};
	port@26 {
		reg = <26>;
		label = "lan11";
		phy-mode = "usxgmii";
		phy-handle = <&phy26>;
		led-set = <1>;
	};

	port@27 {
		reg = <27>;
		label = "lan12";
		phy-mode = "1000base-x";
		phy-handle = <&phy27>;
		managed = "in-band-status";
		sfp = <&sfp0>;
		led-set = <2>;
	};
};
